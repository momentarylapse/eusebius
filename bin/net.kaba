use "lib/std.kaba"

void main()
	init_lib()
	
	string[] arg
	get_args(arg)
	
	/*if fork() > 0
		print("server")
	else
		print("client")*/
	
	if arg.num > 1
		print("server")
		int s = socket(0)
		print(s)
		print("\n")
		print(bind(s, 123))
		print("\n")
		print(listen(s))
		print("\n")
		while true
			int ss = accept(s)
			print(ss)
			sleep(1)
	else
		print("client")
		int s = socket(0)
		print(s)
		print("\n")
		print(connect(s, 123))
		print("\n")
	
	exit(0)
